#include "model_common.h"


std::array<Vec3, {{len .Verts}}> verts = {Vec3 {{ range $index, $vert := .Verts}}{{if $index}},{{end}}{{printf "%s" $vert}}{{end}} };

std::array<Vec2, {{len .UVs}}> uvs = {Vec2 {{ range $index, $vert := .UVs}}{{if $index}},{{end}}{{printf "%s" $vert}}{{end}} };



std::array<Tri, {{len .Faces}}> faces = {Tri {{ range $index, $face := .Faces}}{{if $index}},{{end}}{{printf "%s" $face}}{{end}} };


std::array<Material,{{len .Materials}}>  materials = { 
    Material{{ range $index, $mat := .Materials}}
    {{if $index}},{{else}} {{end}}{{printf "%s" $mat}}{{end}}
 };

std::array<uint32_t, {{len .Kd_map}}>  Kd_img = { {{range $index, $col := .Kd_map}}{{if $index}}, {{end}}{{printf "0x%08X" $col}}{{end}} };

Model model = Model(tcb::make_span<Material>(materials), 
                    tcb::make_span<Vec3>(verts), 
                    tcb::make_span<Vec2>(uvs), 
                    tcb::make_span<Tri>(faces), 
                    Model::Texture{ {{.Kd_width}}, {{.Kd_height}}, Kd_img}
                );
